('starting', 'build')

**********************************************************************

Test build
build project using make

**********************************************************************
Trying to build project using make
make
rm -f testfile


test build PASSED
 (build project using make)

('starting', 'shutdown')

**********************************************************************

Test shutdown
init server and client then call shutdown

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9817
/tmp/tmpNRh7bp/p/server 9817 /home/yifanli/CS537/project4/test.img
server beginning
before start server
server port 9817 
start address 0x7f85edf36000
imap address 0x7f85edf37000
inode_bitmap_len : 1
data_bitmap_len : 1
inode_region_len : 1
data_region_bitmap_len : 32
num_inodes : 32
num_data : 32
server:: waiting...
server:: read message [size:1000 contents:()]
shutdown!
MFS Init
open mfs portnumbrt 39795
MFS Shutdown
waiting for response
client:: got reply [size:1000 contents:(0)


test shutdown PASSED
 (init server and client then call shutdown)

('starting', 'creat')

**********************************************************************

Test creat
creat a file and check with lookup

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 7136
/tmp/tmpNRh7bp/p/server 7136 /home/yifanli/CS537/project4/test.img
server beginning
before start server
server port 7136 
start address 0x7f31af713000
imap address 0x7f31af714000
inode_bitmap_len : 1
data_bitmap_len : 1
inode_region_len : 1
data_region_bitmap_len : 32
num_inodes : 32
num_data : 32
server:: waiting...
server:: read message [size:1000 contents:()]
freeInodeNum : 1
pinode->direct[0] : 4
start address : 0x7f31af713000
 direntry : 0x7f31af717000, entry inum : 0
 direntry : 0x7f31af717020, entry inum : 0
 direntry : 0x7f31af717040, entry inum : -1
imap value 1
finish creating regular file
server:: waiting...
server:: read message [size:1000 contents:()]
request2
server:: waiting...
server:: read message [size:1000 contents:()]
shutdown!
MFS Init
open mfs portnumbrt 39795
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS Shutdown
waiting for response
client:: got reply [size:1000 contents:(	)


test creat PASSED
 (creat a file and check with lookup)

('starting', 'write')

**********************************************************************

Test write
write then read one block

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9071
/tmp/tmpNRh7bp/p/server 9071 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 38318
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS write
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Write returned failure inum=1 block=0


test write FAILED
 (write then read one block)
 MFS_Write returned failure inum=1 block=0

('starting', 'stat')

**********************************************************************

Test stat
stat a regular file

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6926
/tmp/tmpNRh7bp/p/server 6926 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 38318
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS Stata : inum : 0
waiting for response
client:: got reply [size:1000 contents:(	)
MFS Stata : inum : 1
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: Stat gave wrong type


test stat FAILED
 (stat a regular file)
 Stat gave wrong type

('starting', 'overwrite')

**********************************************************************

Test overwrite
overwrite a block

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9804
/tmp/tmpNRh7bp/p/server 9804 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 23152
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS write
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Write returned failure inum=1 block=0


test overwrite FAILED
 (overwrite a block)
 MFS_Write returned failure inum=1 block=0

('starting', 'maxfile')

**********************************************************************

Test maxfile
write largest possible file

**********************************************************************
total blocks        39
  inodes            128 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9071
/tmp/tmpNRh7bp/p/server 9071 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 23152
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS write
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Write returned failure inum=1 block=0


test maxfile FAILED
 (write largest possible file)
 MFS_Write returned failure inum=1 block=0

('starting', 'maxfile2')

**********************************************************************

Test maxfile2
write more blocks than possible

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 5709
/tmp/tmpNRh7bp/p/server 5709 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 23152
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
31
MFS write
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Write returned failure inum=1 block=0


test maxfile2 FAILED
 (write more blocks than possible)
 MFS_Write returned failure inum=1 block=0

('starting', 'dir1')

**********************************************************************

Test dir1
check root for dot entries

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 7241
/tmp/tmpNRh7bp/p/server 7241 /home/yifanli/CS537/project4/test.img
server beginning
before start server
server port 7241 
start address 0x7fcd3a748000
imap address 0x7fcd3a749000
inode_bitmap_len : 1
data_bitmap_len : 1
inode_region_len : 1
data_region_bitmap_len : 32
num_inodes : 32
num_data : 32
server:: waiting...
server:: read message [size:1000 contents:()]
request2
server:: waiting...
server:: read message [size:1000 contents:()]
request2
server:: waiting...
server:: read message [size:1000 contents:()]
shutdown!
MFS Init
open mfs portnumbrt 23152
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS Shutdown
waiting for response
client:: got reply [size:1000 contents:(	)


test dir1 PASSED
 (check root for dot entries)

('starting', 'dir2')

**********************************************************************

Test dir2
create a new directory and check it

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9202
/tmp/tmpNRh7bp/p/server 9202 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 23152
MFS create, pinum: 0, type: 0, name: testdir
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Lookup returned failure inum=0 name='testdir'


test dir2 FAILED
 (create a new directory and check it)
 MFS_Lookup returned failure inum=0 name='testdir'

('starting', 'baddir')

**********************************************************************

Test baddir
try to create a file with a file parent inode

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 8971
/tmp/tmpNRh7bp/p/server 8971 /home/yifanli/CS537/project4/test.img
server beginning
before start server
server port 8971 
start address 0x7efcbad69000
imap address 0x7efcbad6a000
inode_bitmap_len : 1
data_bitmap_len : 1
inode_region_len : 1
data_region_bitmap_len : 32
num_inodes : 32
num_data : 32
server:: waiting...
server:: read message [size:1000 contents:()]
freeInodeNum : 1
pinode->direct[0] : 4
start address : 0x7efcbad69000
 direntry : 0x7efcbad6d000, entry inum : 0
 direntry : 0x7efcbad6d020, entry inum : 0
 direntry : 0x7efcbad6d040, entry inum : -1
imap value 1
finish creating regular file
server:: waiting...
server:: read message [size:1000 contents:()]
request2
server:: waiting...
server:: read message [size:1000 contents:()]
server:: waiting...
server:: read message [size:1000 contents:()]
shutdown!
MFS Init
open mfs portnumbrt 36868
MFS create, pinum: 0, type: 1, name: testdir
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS create, pinum: 1, type: 1, name: testfile
waiting for response
client:: got reply [size:1000 contents:(	)
MFS Shutdown
waiting for response
client:: got reply [size:1000 contents:(	)


test baddir PASSED
 (try to create a file with a file parent inode)

('starting', 'baddir2')

**********************************************************************

Test baddir2
try to lookup a file with a file parent inode

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 7098
/tmp/tmpNRh7bp/p/server 7098 /home/yifanli/CS537/project4/test.img
server beginning
before start server
server port 7098 
start address 0x7fd534e3e000
imap address 0x7fd534e3f000
inode_bitmap_len : 1
data_bitmap_len : 1
inode_region_len : 1
data_region_bitmap_len : 32
num_inodes : 32
num_data : 32
server:: waiting...
server:: read message [size:1000 contents:()]
freeInodeNum : 1
pinode->direct[0] : 4
start address : 0x7fd534e3e000
 direntry : 0x7fd534e42000, entry inum : 0
 direntry : 0x7fd534e42020, entry inum : 0
 direntry : 0x7fd534e42040, entry inum : -1
imap value 1
finish creating regular file
server:: waiting...
server:: read message [size:1000 contents:()]
request2
server:: waiting...
server:: read message [size:1000 contents:()]
request2
lookup: not directory
server:: waiting...
server:: read message [size:1000 contents:()]
shutdown!
MFS Init
open mfs portnumbrt 36868
MFS create, pinum: 0, type: 1, name: testdir
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS Shutdown
waiting for response
client:: got reply [size:1000 contents:(	)


test baddir2 PASSED
 (try to lookup a file with a file parent inode)

('starting', 'unlink')

**********************************************************************

Test unlink
unlink a file

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 8859
/tmp/tmpNRh7bp/p/server 8859 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 36868
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS unlink
waiting for response
client:: got reply [size:1000 contents:(ÿÿÿÿ)
Failure: MFS_Unlink returned failure pinum=0 name='test'


test unlink FAILED
 (unlink a file)
 MFS_Unlink returned failure pinum=0 name='test'

('starting', 'unlink2')

**********************************************************************

Test unlink2
unlink a directory

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 7332
/tmp/tmpNRh7bp/p/server 7332 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 36868
MFS create, pinum: 0, type: 0, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS unlink
waiting for response
client:: got reply [size:1000 contents:(ÿÿÿÿ)
Failure: MFS_Unlink returned failure pinum=0 name='test'


test unlink2 FAILED
 (unlink a directory)
 MFS_Unlink returned failure pinum=0 name='test'

('starting', 'empty')

**********************************************************************

Test empty
unlink a non-empty directory

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6916
/tmp/tmpNRh7bp/p/server 6916 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 30593
MFS create, pinum: 0, type: 0, name: testdir
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Lookup returned failure inum=0 name='testdir'


test empty FAILED
 (unlink a non-empty directory)
 MFS_Lookup returned failure inum=0 name='testdir'

('starting', 'name')

**********************************************************************

Test name
name too long

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6234
/tmp/tmpNRh7bp/p/server 6234 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 30593
MFS create, pinum: 0, type: 1, name: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
waiting for response
client:: got reply [size:1000 contents:(0)
Failure: Name argument too long did not result in failure


test name FAILED
 (name too long)
 Name argument too long did not result in failure

('starting', 'persist')

**********************************************************************

Test persist
restart server after creating a file

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 7106
/tmp/tmpNRh7bp/p/server 7106 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 30593
MFS create, pinum: 0, type: 1, name: test
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
MFS write
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Write returned failure inum=1 block=0


test persist FAILED
 (restart server after creating a file)
 MFS_Write returned failure inum=1 block=0

('starting', 'bigdir')

**********************************************************************

Test bigdir
create a directory with 126 files

**********************************************************************
total blocks        39
  inodes            128 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6036
/tmp/tmpNRh7bp/p/server 6036 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 25565
MFS create, pinum: 0, type: 0, name: testdir
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Lookup returned failure inum=0 name='testdir'


test bigdir FAILED
 (create a directory with 126 files)
 MFS_Lookup returned failure inum=0 name='testdir'

('starting', 'deep')

**********************************************************************

Test deep
create many deeply nested directories

**********************************************************************
total blocks        39
  inodes            128 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6263
/tmp/tmpNRh7bp/p/server 6263 /home/yifanli/CS537/project4/test.img
MFS Init
open mfs portnumbrt 25565
MFS create, pinum: 0, type: 0, name: testdir
waiting for response
client:: got reply [size:1000 contents:(0)
MFS lookup
waiting for response
client:: got reply [size:1000 contents:(	)
Failure: MFS_Lookup returned failure inum=0 name='testdir'


test deep FAILED
 (create many deeply nested directories)
 MFS_Lookup returned failure inum=0 name='testdir'

**********************************************************************
Summary:
test build PASSED
 (build project using make)

test shutdown PASSED
 (init server and client then call shutdown)

test creat PASSED
 (creat a file and check with lookup)

test write FAILED
 (write then read one block)
 MFS_Write returned failure inum=1 block=0

test stat FAILED
 (stat a regular file)
 Stat gave wrong type

test overwrite FAILED
 (overwrite a block)
 MFS_Write returned failure inum=1 block=0

test maxfile FAILED
 (write largest possible file)
 MFS_Write returned failure inum=1 block=0

test maxfile2 FAILED
 (write more blocks than possible)
 MFS_Write returned failure inum=1 block=0

test dir1 PASSED
 (check root for dot entries)

test dir2 FAILED
 (create a new directory and check it)
 MFS_Lookup returned failure inum=0 name='testdir'

test baddir PASSED
 (try to create a file with a file parent inode)

test baddir2 PASSED
 (try to lookup a file with a file parent inode)

test unlink FAILED
 (unlink a file)
 MFS_Unlink returned failure pinum=0 name='test'

test unlink2 FAILED
 (unlink a directory)
 MFS_Unlink returned failure pinum=0 name='test'

test empty FAILED
 (unlink a non-empty directory)
 MFS_Lookup returned failure inum=0 name='testdir'

test name FAILED
 (name too long)
 Name argument too long did not result in failure

test persist FAILED
 (restart server after creating a file)
 MFS_Write returned failure inum=1 block=0

test bigdir FAILED
 (create a directory with 126 files)
 MFS_Lookup returned failure inum=0 name='testdir'

test deep FAILED
 (create many deeply nested directories)
 MFS_Lookup returned failure inum=0 name='testdir'

Passed 6 of 19 tests.
Overall 6 of 19
